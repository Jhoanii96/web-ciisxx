<?php

/* 
    
    AUTOR DE PROGRAMACIÓN PHP: 
    JHON ALVARADO ACHATA
    
    MODIFICACIONES Y COLABORACIONES:
    LEANDRO ANDRÉ RAMOS VALDEZ
    JOSUE ALDAIR MAMANI CARIAPAZA
	
*/

class adminModel extends Model{public function __construct(){parent::__construct();}public function mostrar_tpreinscripcionesinicio(){}public function mostrar_numero_AsistentesPendientes(){$query="select count(ins.id_inscripcion) as pendientes from inscripcion ins\n        inner join pago_inscripcion pi \n        on pi.id_inscripcion = ins.id_inscripcion \n        inner join usuarios us\n        on us.id_usuario = ins.id_usuario \n        where pi.estado_preinscripcion = 0 and (us.id_tipo_usuario = 4 or us.id_tipo_usuario = 3); ";$res=$this->db->query($query);return $res;}public function mostrar_numero_AsistentesInscritos(){$query="select count(ins.id_inscripcion) as inscritos from inscripcion ins\n        inner join pago_inscripcion pi \n        on pi.id_inscripcion = ins.id_inscripcion \n        where pi.estado_preinscripcion = 1;";$res=$this->db->query($query);return $res;}public function mostrar_numero_AsistentesInscritosEst(){$query="select count(ins.id_inscripcion) as estudiantes from inscripcion ins\n        inner join usuarios us\n        on us.id_usuario = ins.id_usuario \n        inner join pago_inscripcion pi \n        on pi.id_inscripcion = ins.id_inscripcion \n        where us.id_tipo_usuario = 4 and pi.estado_preinscripcion = 1;";$res=$this->db->query($query);return $res;}public function mostrar_numero_AsistentesInscritosPro(){$query="select count(ins.id_inscripcion) as profesionales from inscripcion ins\n        inner join usuarios us\n        on us.id_usuario = ins.id_usuario \n        inner join pago_inscripcion pi \n        on pi.id_inscripcion = ins.id_inscripcion \n        where us.id_tipo_usuario = 3 and pi.estado_preinscripcion = 1;";$res=$this->db->query($query);return $res;}public function BellNotifications(){$query="select * from notification \n        where ((UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(date_notify))/3600) <= 48  order by date_notify desc;";$res=$this->db->query($query);return $res;}public function mostrar_articulo($numero_articulo){$query="CALL mostrar_articulo('".$numero_articulo."');";$res=$this->db->query($query);return $res;}public function mostrar_tarticulo(){$query="CALL mostrar_tarticulo();";$res=$this->db->query($query);return $res;}public function mostrar_tarticulotag($numero_articulo){$query="select t.nombre_tag as tagname from tag_articulo t\n            inner join articulo a\n            on a.id_articulo = t.id_articulo\n            where a.num_articulo = '".$numero_articulo."';";$res=$this->db->query($query);return $res;}public function admin_organizador($usuario){$query="CALL admin_organizador('".$usuario."');";$res=$this->db->query($query);return $res;}public function update_article($numart,$title,$stitle,$desc,$date,$d,$devent,$fechaFija,$url,$priority){$query="UPDATE articulo\n                    SET \n                    `titulo_articulo` = '".$title."',\n                    `short_titulo_articulo` = '".$stitle."',\n                    `descripcion_titular` = '".$desc."',\n                    `fecha_publicacion` = '".$date."',\n                    `fecha_vencimiento` = '".$d."',\n                    `fecha_evento` = '".$devent."',\n                    `fecha_nodefinida` = '".$fechaFija."',\n                    `enlace_externa` = '".$url."',\n                    `prioridad_articulo` = '".$priority."'\n                    WHERE num_articulo = '".$numart."';";$this->db->query($query);}public function update_articleWi($numart,$title,$stitle,$desc,$encoded_image,$date,$d,$devent,$fechaFija,$url,$priority){$query="UPDATE articulo\n                    SET \n                    `titulo_articulo` = '".$title."',\n                    `short_titulo_articulo` = '".$stitle."',\n                    `descripcion_titular` = '".$desc."',\n                    `imagen_titular` = '".$encoded_image."',\n                    `fecha_publicacion` = '".$date."',\n                    `fecha_vencimiento` = '".$d."',\n                    `fecha_evento` = '".$devent."',\n                    `fecha_nodefinida` = '".$fechaFija."',\n                    `enlace_externa` = '".$url."',\n                    `prioridad_articulo` = '".$priority."'\n                    WHERE num_articulo = '".$numart."';";$this->db->query($query);}public function delete_tagsArticle($numArticle){$id_articulo1="select @id_articulo := a.id_articulo as idArticulo from articulo a where a.num_articulo = '".$numArticle."'";$id_articulo2=$this->db->query($id_articulo1);$consulta1=$id_articulo2->fetch_array();$query="DELETE FROM tag_articulo\n                        WHERE id_articulo = ".$consulta1['idArticulo'].";";$this->db->query($query);}public function insert_article(articulo $dataArticle){$query="CALL Insertar_articulo(\n                        '".$dataArticle->getNumart()."', \n                        '".$dataArticle->getTitle()."', \n                        '".$dataArticle->getStitle()."', \n                        '".$dataArticle->getDesc()."', \n                        '".$dataArticle->getImage()."', \n                        '".$dataArticle->getDate()."', \n                        '".$dataArticle->getD()."', \n                        '".$dataArticle->getDevent()."', \n                        '".$dataArticle->getFechaFija()."', \n                        '".$dataArticle->getUrl()."', \n                        '".$dataArticle->getPriority()."');";$this->db->query($query);}public function insert_tagArticle($numArticle,$nombTag){$id_articulo1="select @id_articulo := a.id_articulo as idArticulo from articulo a where a.num_articulo = '".$numArticle."'";$id_articulo2=$this->db->query($id_articulo1);$consulta1=$id_articulo2->fetch_array();$query="\n            insert into tag_articulo (id_articulo, nombre_tag) \n            values (".$consulta1['idArticulo'].", '".$nombTag."');";$this->db->query($query);}public function insert_preins(PreInscripcion $dataPreIns){$query="CALL Insertar_preins(\n                        '".$dataPreIns->getFirstName()."', \n                        '".$dataPreIns->getLastName()."', \n                        '".$dataPreIns->getDni()."', \n                        '".$dataPreIns->getCellphone()."', \n                        '".$dataPreIns->getEmail()."',  \n                        '".$dataPreIns->getAnio()."', \n                        '".$dataPreIns->getCountry()."', \n                        '".$dataPreIns->getCity()."',\n                        '".$dataPreIns->getTipo()."', \n                        '".$dataPreIns->getInstitution()."',\n                        '".$dataPreIns->getGrade()."',\n                        '".$dataPreIns->getVoucher()."');";$this->db->query($query);}public function mostrar_tpreinscripciones(){$query1="SET lc_time_names = 'es_ES';";$this->db->query($query1);$query2="select * from v_preinscripcion;";$res=$this->db->query($query2);return $res;}public function accept_preins(int $acePreins){$query2="CALL `aceptar_preinscripcion`(".$acePreins.");";$this->db->query($query2);}public function decline_preins(int $denPreins){$query2="CALL `denegar_preinscripcion`(".$denPreins.");";$this->db->query($query2);}public function mostrar_dpreinscripciones(int $datoPreins){$query1="SET lc_time_names = 'es_ES';";$this->db->query($query1);$query="select * from v_showPreinscripciones where id = ".$datoPreins.";";$res=$this->db->query($query);return $res;}public function insert_students(estudiante $dataStudents){$query="CALL Insertar_estudiante(\n                        '".$dataStudents->getFirstName()."', \n                        '".$dataStudents->getLastName()."', \n                        '".$dataStudents->getDni()."', \n                        '".$dataStudents->getContact_point()."', \n                        '".$dataStudents->getEmail()."', \n                        '".$dataStudents->getQr()."', \n                        '".$dataStudents->getYearStudent()."', \n                        '".$dataStudents->getCountry()."', \n                        '".$dataStudents->getCity()."', \n                        '".$dataStudents->getInstitution()."');";$this->db->query($query);}public function showTable_students(){$query="CALL mostrar_estudiante();";$res=$this->db->query($query);return $res;}public function showEdit_students($data){$query="select * from v_estudiante where numEst = ".$data."";$res=$this->db->query($query);return $res;}public function update_students(estudiante $dataEst,$numEst){$query="CALL `actualizar_estudiante`(\n                '".$dataEst->getFirstName()."', \n                '".$dataEst->getLastName()."', \n                '".$dataEst->getDni()."', \n                '".$dataEst->getContact_point()."', \n                '".$dataEst->getEmail()."', \n                '".$dataEst->getQr()."', \n                '".$dataEst->getYearStudent()."', \n                '".$dataEst->getCountry()."', \n                '".$dataEst->getCity()."', \n                '".$dataEst->getInstitution()."', \n                ".$numEst.");";$this->db->query($query);}public function deleteEstudiante(int $data){$query="CALL `eliminar_estudiante`(".$data.");";$this->db->query($query);}public function mostrar_tprofesional(){$query="CALL mostrar_tprofesional();";$res=$this->db->query($query);return $res;}public function mostrar_profesional($numPro){$query="CALL mostrar_profesional(".$numPro.");";$res=$this->db->query($query);return $res;}public function insert_profesional(profesional $dataProfesional){$query="CALL Insertar_profesional(\n                '".$dataProfesional->getNombre()."',\n                '".$dataProfesional->getApellido()."',\n                '".$dataProfesional->getDni()."',\n                '".$dataProfesional->getCelular()."',\n                '".$dataProfesional->getEmail()."',\n                '".$dataProfesional->getQr()."',\n                '".$dataProfesional->getGrado()."',\n                '".$dataProfesional->getCiudad()."',\n                '".$dataProfesional->getPais()."');";$res=$this->db->query($query);}public function update_profesional(profesional $dataProfesional,$numPro){$query="CALL actualizar_profesional(\n                '".$dataProfesional->getNombre()."',\n                '".$dataProfesional->getApellido()."',\n                '".$dataProfesional->getDni()."',\n                '".$dataProfesional->getCelular()."',\n                '".$dataProfesional->getEmail()."',\n                '".$dataProfesional->getQr()."',\n                '".$dataProfesional->getGrado()."',\n                '".$dataProfesional->getCiudad()."',\n                '".$dataProfesional->getPais()."',\n                ".$numPro.");";$this->db->query($query);}public function deleteProfesional(int $data){$query="CALL `eliminar_profesional`(".$data.");";$this->db->query($query);}public function mostrar_torganizador(){$query="CALL mostrar_torganizador();";$res=$this->db->query($query);return $res;}public function insert_organizador(organizador $dataOrganizer,$imagen_perfil){$query="CALL Insertar_organizador(\n                        '".$dataOrganizer->getNombre()."', \n                        '".$dataOrganizer->getApellido()."', \n                        '".$dataOrganizer->getEmail()."', \n                        '".$dataOrganizer->getDni()."', \n                        '".$dataOrganizer->getCelular()."', \n                        ".$dataOrganizer->getRol_organizador().", \n                        '".$imagen_perfil."', \n                        '".$dataOrganizer->getCodigo()."', \n                        '".$dataOrganizer->getClave()."');";$this->db->query($query);}public function update_organizador(organizador $dataOrganizer,$imagen_perfil,$numOrg){$query="CALL actualizar_organizador(\n                        '".$dataOrganizer->getNombre()."', \n                        '".$dataOrganizer->getApellido()."', \n                        '".$dataOrganizer->getEmail()."', \n                        '".$dataOrganizer->getDni()."', \n                        '".$dataOrganizer->getCelular()."', \n                        ".$dataOrganizer->getRol_organizador().", \n                        '".$imagen_perfil."', \n                        '".$dataOrganizer->getCodigo()."', \n                        '".$dataOrganizer->getClave()."',\n                        ".$numOrg." );";$this->db->query($query);}public function update_organizadorWi(organizador $dataOrganizer,$numOrg){$query="CALL actualizar_organizadorWi(\n                        '".$dataOrganizer->getNombre()."', \n                        '".$dataOrganizer->getApellido()."', \n                        '".$dataOrganizer->getEmail()."', \n                        '".$dataOrganizer->getDni()."', \n                        '".$dataOrganizer->getCelular()."', \n                        ".$dataOrganizer->getRol_organizador().", \n                        '".$dataOrganizer->getCodigo()."', \n                        '".$dataOrganizer->getClave()."', \n                        ".$numOrg." );";$this->db->query($query);}public function mostrar_organizador($numOrg){$query="CALL mostrar_organizador(".$numOrg.");";$res=$this->db->query($query);return $res;}public function mostrar_tponente(){$query="CALL mostrar_tponente();";$res=$this->db->query($query);return $res;}public function insert_ponente(ponente $dataPonente){$query="CALL Insertar_ponente(\n                        '".$dataPonente->getNombre()."', \n                        '".$dataPonente->getApellido()."', \n                        '".$dataPonente->getDni()."', \n                        '".$dataPonente->getCelular()."', \n                        '".$dataPonente->getEmail()."', \n                        '".$dataPonente->getPais()."', \n                        '".$dataPonente->getCiudad()."', \n                        '".$dataPonente->getFoto()."', \n                        '".$dataPonente->getEmpresa()."',\n                        '".$dataPonente->getTitulo()."',\n                        '".$dataPonente->getBandera()."',\n                        '".$dataPonente->getDescripcion()."',\n                        '".$dataPonente->getLink()."'\n                    \n                    );";$this->db->query($query);}public function update_ponente(ponente $dataPonente,$numPon){$query="CALL actualizar_ponente(\n                        '".$dataPonente->getNombre()."', \n                        '".$dataPonente->getApellido()."', \n                        '".$dataPonente->getDni()."', \n                        '".$dataPonente->getCelular()."', \n                        '".$dataPonente->getEmail()."', \n                        '".$dataPonente->getPais()."', \n                        '".$dataPonente->getCiudad()."', \n                        '".$dataPonente->getFoto()."', \n                        '".$dataPonente->getEmpresa()."',\n                        '".$dataPonente->getTitulo()."',\n                        '".$dataPonente->getBandera()."',\n                        '".$dataPonente->getDescripcion()."',\n                        '".$dataPonente->getLink()."',\n                        ".$numPon." );";$this->db->query($query);}public function update_ponenteBan(ponente $dataPonente,$numPon){$query1="\n            UPDATE `usuarios`\n                SET\n                `nombre_usuario` = '".$dataPonente->getNombre()."',\n                `apellido_usuario` = '".$dataPonente->getApellido()."',\n                `dni_usuario` = '".$dataPonente->getDni()."',\n                `celular_usuario` = '".$dataPonente->getCelular()."',\n                `email_usuario` = '".$dataPonente->getEmail()."'\n                WHERE `id_usuario` = ".$numPon.";";$this->db->query($query1);$query2="\n            UPDATE `ponentes`\n                SET\n                `nombre_empresa` = '".$dataPonente->getEmpresa()."',\n                `pais_ponentes` = '".$dataPonente->getPais()."',\n                `ciudad_ponentes` = '".$dataPonente->getCiudad()."',\n                `titulo_abrev` = '".$dataPonente->getTitulo()."',\n                `imagen_bandera` = '".$dataPonente->getBandera()."',\n                `descripcion` = '".$dataPonente->getDescripcion()."',\n                `link_informacion` = '".$dataPonente->getLink()."' \n                WHERE `id_usuario` = ".$numPon.";";$this->db->query($query2);}public function update_ponenteFoto(ponente $dataPonente,$numPon){$query1="\n            UPDATE `usuarios`\n                SET\n                `nombre_usuario` = '".$dataPonente->getNombre()."',\n                `apellido_usuario` = '".$dataPonente->getApellido()."',\n                `dni_usuario` = '".$dataPonente->getDni()."',\n                `celular_usuario` = '".$dataPonente->getCelular()."',\n                `email_usuario` = '".$dataPonente->getEmail()."'\n                WHERE `id_usuario` = ".$numPon.";";$this->db->query($query1);$query2="\n                UPDATE `ponentes`\n                SET\n                `foto_ponente` = '".$dataPonente->getFoto()."',\n                `nombre_empresa` = '".$dataPonente->getEmpresa()."',\n                `pais_ponentes` = '".$dataPonente->getPais()."',\n                `ciudad_ponentes` = '".$dataPonente->getCiudad()."',\n                `titulo_abrev` = '".$dataPonente->getTitulo()."',\n                `descripcion` = '".$dataPonente->getDescripcion()."',\n                `link_informacion` = '".$dataPonente->getLink()."' \n                WHERE `id_usuario` = ".$numPon.";";$this->db->query($query2);}public function update_ponenteSFB(ponente $dataPonente,$numPon){$query1="\n            UPDATE `usuarios`\n                SET\n                `nombre_usuario` = '".$dataPonente->getNombre()."',\n                `apellido_usuario` = '".$dataPonente->getApellido()."',\n                `dni_usuario` = '".$dataPonente->getDni()."',\n                `celular_usuario` = '".$dataPonente->getCelular()."',\n                `email_usuario` = '".$dataPonente->getEmail()."'\n                WHERE `id_usuario` = ".$numPon.";";$this->db->query($query1);$query2="\n                UPDATE `ponentes`\n                SET\n                `nombre_empresa` = '".$dataPonente->getEmpresa()."',\n                `pais_ponentes` = '".$dataPonente->getPais()."',\n                `ciudad_ponentes` = '".$dataPonente->getCiudad()."',\n                `titulo_abrev` = '".$dataPonente->getTitulo()."',\n                `descripcion` = '".$dataPonente->getDescripcion()."',\n                `link_informacion` = '".$dataPonente->getLink()."' \n                WHERE `id_usuario` = ".$numPon.";";$this->db->query($query2);}public function mostrar_ponente($numPon){$query="CALL mostrar_ponente(".$numPon.");";$res=$this->db->query($query);return $res;}public function update_perfil(perfil $dataPerfil,$numPerfil){$query="CALL actualizar_perfil(\n                        '".$dataPerfil->getNombre()."', \n                        '".$dataPerfil->getApellido()."', \n                        '".$dataPerfil->getEmail()."', \n                        '".$dataPerfil->getDni()."', \n                        '".$dataPerfil->getCelular()."', \n                        '".$dataPerfil->getRol_organizador()."', \n                        '".$dataPerfil->getFoto_perfil()."', \n                        '".$dataPerfil->getCodigo()."', \n                        '".$dataPerfil->getClave()."',\n                        ".$numPerfil.");";$this->db->query($query);}public function update_perfilWi(perfil $dataPerfil,$numPerfil){$query="CALL actualizar_perfilWi(\n                        '".$dataPerfil->getNombre()."', \n                        '".$dataPerfil->getApellido()."', \n                        '".$dataPerfil->getEmail()."', \n                        '".$dataPerfil->getDni()."', \n                        '".$dataPerfil->getCelular()."', \n                        '".$dataPerfil->getRol_organizador()."', \n                        '".$dataPerfil->getFoto_perfil()."', \n                        '".$dataPerfil->getCodigo()."', \n                        '".$dataPerfil->getClave()."', \n                        ".$numPerfil.");";$this->db->query($query);}public function mostrar_perfil($codPerfil){$query="CALL mostrar_perfil('".$codPerfil."');";$res=$this->db->query($query);return $res;}public function mostrar_ttematicas(){$query="CALL mostrar_ttematicas();";$res=$this->db->query($query);return $res;}public function insert_topics($name,$imagenTematica,$descripcion){$query="CALL Insertar_tematica(\n                        '".$name."', \n                        '".$imagenTematica."', \n                        '".$descripcion."');";$this->db->query($query);}public function update_topics($idTem,$name,$imagenTematica,$descripcion){$query="CALL actualizar_tematica(\n                        '".$name."', \n                        '".$imagenTematica."', \n                        '".$descripcion."', \n                        ".$idTem." );";$this->db->query($query);}public function update_topicsWi($idTem,$name,$descripcion){$query="CALL actualizar_tematicaWi(\n                        '".$name."', \n                        '".$descripcion."', \n                        ".$idTem." );";$this->db->query($query);}public function mostrar_topics($numTop){$query="CALL mostrar_tematica(".$numTop.");";$res=$this->db->query($query);return $res;}public function mostrar_tcharlas($selectC){$query=" select * from v_charlas where tipoAct like concat('%', '".$selectC."', '%');";$res=$this->db->query($query);return $res;}public function mostrar_dTalksTopics(){$query="select idTem, nombre from v_tematicas;";$res=$this->db->query($query);return $res;}public function mostrar_dTalksSpeakers(){$query="select idUsuario, concat(nombre, ' ', apellido) as nombres from v_ponentes;";$res=$this->db->query($query);return $res;}public function insert_talks(charlas $dataCharlas){$query="CALL `Insertar_charlas`(\n                '".$dataCharlas->getTitleTalks()."',\n                ".$dataCharlas->getTypeTalks().",\n                ".$dataCharlas->getIdTopics().",\n                ".$dataCharlas->getIdSpeakers().",\n                '".$dataCharlas->getDateTalks()."',\n                '".$dataCharlas->getHourTalks()."',\n                '".$dataCharlas->getTurnTalks()."',\n                '".$dataCharlas->getDurationTalks()."');";$this->db->query($query);}public function update_talks(charlas $dataCharlas,$idCharla){$query="CALL `actualizar_charlas`(\n                '".$dataCharlas->getTitleTalks()."',\n                ".$dataCharlas->getTypeTalks().",\n                ".$dataCharlas->getIdTopics().",\n                ".$dataCharlas->getIdSpeakers().",\n                '".$dataCharlas->getDateTalks()."',\n                '".$dataCharlas->getHourTalks()."',\n                '".$dataCharlas->getTurnTalks()."',\n                '".$dataCharlas->getDurationTalks()."',\n                ".$idCharla.");";$this->db->query($query);}public function mostrar_talks($idCharla){$query="select * from v_charlaEdit\n                where idCharla = ".$idCharla."";$res=$this->db->query($query);return $res;}public function mostrar_nombrealumnos(){$query="SELECT id_usuario,nombre_usuario, apellido_usuario FROM usuarios WHERE (id_tipo_usuario=3 || id_tipo_usuario=4)  ORDER BY nombre_usuario ASC;";$res=$this->db->query($query);return $res;}public function insertar_inscripcion(inscripcion $dataInscripciones,$cod_Asist,$num_Oper){$query="CALL Insertar_inscripcion(\n                '".$dataInscripciones->getIdUser()."',\n                '".$dataInscripciones->getDateIncription()."',\n                '".$dataInscripciones->getIdOrganizer()."',\n                '".$dataInscripciones->getIdActivity()."',\n                '".$dataInscripciones->getLinkPhotoVoucher()."',\n                '".$dataInscripciones->getTypeInscription()."',\n                '".$dataInscripciones->getPaymentType()."',\n                '".$dataInscripciones->getStatePreinscription()."',\n                '".$dataInscripciones->getPrepayment()."',\n                '".$dataInscripciones->getPaymentInscription()."',\n                '".$cod_Asist."',\n                '".$num_Oper."');";$res=$this->db->query($query);return $res;}public function mostrar_tinscripciones(){$query1="SET lc_time_names = 'es_ES';";$this->db->query($query1);$query="select * from v_inscripcion where epiIns = '1';";$res=$this->db->query($query);return $res;}public function get_codAsistencia(){$query="select (IFNULL(max(cod_asistencia) + 1, 1000)) as codAsistencia from inscripcion;";$res=$this->db->query($query);return $res;}public function showEdit_inscriptions($data){$query="select * from v_inscripcion where numIns = ".$data."";$res=$this->db->query($query);return $res;}public function update_inscriptions(inscripcion $dataInscripciones,$cod_Asist,$num_Oper){$query1=" update `inscripcion`\n                    set\n                    `id_actividad` = ".$dataInscripciones->getIdActivity().",\n                    `cod_asistencia` = '".$cod_Asist."',\n                    `num_operacion` = '".$num_Oper."'\n                    where `id_inscripcion` = ".$dataInscripciones->getIdUser().";";$this->db->query($query1);$query2=" update `pago_inscripcion`\n                    set\n                    `pago_adelanto` = '".$dataInscripciones->getPrepayment()."',\n                    `pago_inscripcion` = '".$dataInscripciones->getPaymentInscription()."'\n                    where `id_inscripcion` = ".$dataInscripciones->getIdUser().";";$this->db->query($query2);}public function deleteInscripcion(int $data){$query="CALL `eliminar_inscripcion`(".$data.");";$this->db->query($query);}public function obtener_data(){$query="\n            select ins.cod_asistencia as codigo, us.nombre_usuario as nombres, \n            us.apellido_usuario as apellidos from inscripcion ins\n            inner join pago_inscripcion pi \n            on pi.id_inscripcion = ins.id_inscripcion \n            inner join usuarios us \n            on us.id_usuario = ins.id_usuario \n            where pi.estado_preinscripcion = 1\n            order by ins.cod_asistencia asc;";$res=$this->db->query($query);return $res;}}